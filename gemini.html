<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tree Vibration Inspection</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .dashboard-container {
            padding: 20px;
        }
        .data-card {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
            background-color: #fff; /* Default light mode background */
            color: #212529; /* Default light mode text color */
        }
        .chart-container {
            margin-bottom: 20px;
        }
        body {
            background-color: #f8f9fa; /* Default light mode body background */
            color: #212529; /* Default light mode body text color */
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .btn-toggle-mode {
            margin-bottom: 15px;
        }

        /* Dark Mode Styles */
        body.dark-mode {
            background-color: #343a40;
            color: #f8f9fa;
        }
        .data-card.dark-mode {
            background-color: #495057;
            border-color: #6c757d;
            color: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="container dashboard-container">
        <div class="d-flex justify-content-end mb-3">
            <button class="btn btn-outline-dark btn-sm btn-toggle-mode" onclick="toggleDarkMode()">Toggle Dark Mode</button>
        </div>

        <h1 class="mb-4">Tree Vibration Inspection Dashboard</h1>

        <div class="row">
            <div class="col-md-6">
                <div class="data-card">
                    <h3>Not Infected Tree Vibration Data</h3>
                    <canvas id="notInfectedChart"></canvas>
                    <ul class="list-unstyled mt-3">
                        <li><strong>Average Vibration:</strong> <span id="notInfectedAvg">-</span></li>
                        <li><strong>Minimum Vibration:</strong> <span id="notInfectedMin">-</span></li>
                        <li><strong>Maximum Vibration:</strong> <span id="notInfectedMax">-</span></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6">
                <div class="data-card">
                    <h3>Infected Tree Vibration Data</h3>
                    <canvas id="infectedChart"></canvas>
                    <ul class="list-unstyled mt-3">
                        <li><strong>Average Vibration:</strong> <span id="infectedAvg">-</span></li>
                        <li><strong>Minimum Vibration:</strong> <span id="infectedMin">-</span></li>
                        <li><strong>Maximum Vibration:</strong> <span id="infectedMax">-</span></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="data-card">
                    <h3>Comparison of Vibration Over Time</h3>
                    <canvas id="comparisonChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Get references to elements we'll need to toggle
        const body = document.body;
        const dataCards = document.querySelectorAll('.data-card');
        const bootstrapCSS = document.getElementById('bootstrap-css');

        function enableDarkMode() {
            body.classList.add('dark-mode');
            dataCards.forEach(card => card.classList.add('dark-mode'));
            // Consider swapping to a dark mode Bootstrap theme if you have one
            // bootstrapCSS.href = 'path/to/bootstrap-dark.min.css';
            localStorage.setItem('theme', 'dark');
        }

        function enableLightMode() {
            body.classList.remove('dark-mode');
            dataCards.forEach(card => card.classList.remove('dark-mode'));
            bootstrapCSS.href = 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css';
            localStorage.setItem('theme', 'light');
        }

        function toggleDarkMode() {
            if (body.classList.contains('dark-mode')) {
                enableLightMode();
            } else {
                enableDarkMode();
            }
        }

        // Check for saved theme preference on page load
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            enableDarkMode();
        }

        // Not Infected Data
        const notInfectedRawData = `
0000s: -0.924152
0001s: -0.998924
0002s: -0.999946
0003s: -0.999911
0004s: -0.999981
0005s: -0.999991
0006s: -0.999962
0007s: -0.999966
0008s: -0.999948
0009s: -0.999960
0010s: -0.999954
0011s: -0.999967
0012s: -0.999965
0013s: -0.999952
0014s: -0.999951
0015s: -0.959483
0016s: -0.964469
0017s: -0.999879
0018s: -0.999937
0019s: -0.999903
0020s: -0.999948
0021s: -0.999931
0022s: -0.999933
0023s: -0.999903
0024s: -0.999930
0025s: -0.999935
0026s: -0.999898
0027s: -0.999932
0028s: -0.999898
0029s: -0.999930
0030s: -0.999925
0031s: -0.929651
0032s: -0.997837
0033s: -0.999927
0034s: -0.999912
0035s: -0.999938
0036s: -0.999935
0037s: -0.999920
0038s: -0.999929
0039s: -0.999917
0040s: -0.999899
0041s: -0.999934
0042s: -0.999937
0043s: -0.999958
0044s: -0.999931
0045s: -0.999871
0046s: -0.968800
0047s: -0.960437
0048s: -0.999934
0049s: -0.999930
0050s: -0.999955
0051s: -0.999910
0052s: -0.999898
0053s: -0.999915
0054s: -0.999928
0055s: -0.999947
0056s: -0.999904
0057s: -0.999938
0058s: -0.999917
0059s: -0.999911
0060s: -0.999906
0061s: -0.999929
0062s: -0.932273
0063s: -0.996340
0064s: -0.999932
0065s: -0.999967
0066s: -0.999939
0067s: -0.999910
0068s: -0.999916
0069s: -0.999927
0070s: -0.999949
0071s: -0.999939
0072s: -0.999931
0073s: -0.999930
0074s: -0.999938
0075s: -0.999933
0076s: -0.999934
0077s: -0.973857
0078s: -0.954824
0079s: -0.999894
0080s: -0.999941
0081s: -0.999941
0082s: -0.999949
0083s: -0.999892
0084s: -0.999919
0085s: -0.999945
0086s: -0.999950
0087s: -0.999923
0088s: -0.999916
0089s: -0.999952
0090s: -0.999946
0091s: -0.999954
0092s: -0.999934
0093s: -0.936570
0094s: -0.993849
0095s: -0.999934
0096s: -0.999959
0097s: -0.999907
0098s: -0.999938
0099s: -0.999928
0100s: -0.999942
0101s: -0.999929
0102s: -0.999937
0103s: -0.999930
0104s: -0.999925
0105s: -0.999903
0106s: -0.999934
0107s: -0.999914
0108s: -0.982062
0109s: -0.953089
0110s: -0.999902
0111s: -0.999958
0112s: -0.999929
0113s: -0.999980
0114s: -0.999964
0115s: -0.999923
0116s: -0.999919
0117s: -0.999936
0118s: -0.999966
0119s: -0.999962
0120s: -0.999950
0121s: -0.999964
0122s: -0.999957
0123s: -0.999944
0124s: -0.942112
0125s: -0.992953
0126s: -0.999931
0127s: -0.999964
0128s: -0.999946
0129s: -0.999915
0130s: -0.999936
0131s: -0.999954
0132s: -0.999952
0133s: -0.999934
0134s: -0.999968
0135s: -0.999954
0136s: -0.999950
0137s: -0.999931
0138s: -0.999928
0139s: -0.995332
0140s: -0.939476
0141s: -0.999905
0142s: -0.999954
0143s: -0.999951
0144s: -0.999956
0145s: -0.999951
0146s: -0.999913
0147s: -0.999967
0148s: -0.999914
0149s: -0.999923
0150s: -0.999964
0151s: -0.999953
0152s: -0.999962
0153s: -0.999954
0154s: -0.999929
0155s: -0.950238
0156s: -0.984950
0157s: -0.999948
0158s: -0.999928
0159s: -0.999932
0160s: -0.999966
0161s: -0.999917
0162s: -0.999957
0163s: -0.999970
0164s: -0.999953
0165s: -0.999959
0166s: -0.999962
0167s: -0.999964
0168s: -0.999932
0169s: -0.999976
0170s: -0.999942
0171s: -0.936175
0172s: -0.999882
0173s: -0.999924
0174s: -0.999976
0175s: -0.999942
0176s: -0.999962
0177s: -0.999976
0178s: -0.999955
0179s: -0.999943
0180s: -0.999950
        `;
        const notInfectedData = notInfectedRawData.trim().split('\n').map(line => {
            const [time, value] = line.split(': ');
            return { time, value: parseFloat(value) };
        });
        const notInfectedValues = notInfectedData.map(item => item.value);
        const notInfectedTimes = notInfectedData.map(item => item.time);
        const notInfectedAvg = notInfectedValues.reduce((a, b) => a + b, 0) / notInfectedValues.length;
        const notInfectedMin = Math.min(...notInfectedValues);
        const notInfectedMax = Math.max(...notInfectedValues);
        document.getElementById('notInfectedAvg').textContent = notInfectedAvg.toFixed(6);
        document.getElementById('notInfectedMin').textContent = notInfectedMin.toFixed(6);
        document.getElementById('notInfectedMax').textContent = notInfectedMax.toFixed(6);

        // Infected Data
        const infectedRawData = `
        
        0000s: -0.905631
0001s: -0.984236
0002s: -0.999922
0003s: -0.999909
0004s: -0.999906
0005s: -0.999905
0006s: -0.999947
0007s: -0.999915
0008s: -0.999907
0009s: -0.999908
0010s: -0.999922
0011s: -0.999953
0012s: -0.999959
0013s: -0.999847
0014s: -0.999912
0015s: -0.954438
0016s: -0.900001
0017s: -0.951087
0018s: -0.999383
0019s: -0.999911
0020s: -0.999919
0021s: -0.999885
0022s: -0.999936
0023s: -0.999906
0024s: -0.999868
0025s: -0.999877
0026s: -0.999853
0027s: -0.999846
0028s: -0.999871
0029s: -0.999870
0030s: -0.999789
0031s: -0.908880
0032s: -0.979552
0033s: -0.999868
0034s: -0.999900
0035s: -0.999876
0036s: -0.999875
0037s: -0.999909
0038s: -0.999878
0039s: -0.999917
0040s: -0.999862
0041s: -0.999864
0042s: -0.999880
0043s: -0.999903
0044s: -0.999893
0045s: -0.999911
0046s: -0.958076
0047s: -0.933759
0048s: -0.998523
0049s: -0.999912
0050s: -0.999915
0051s: -0.999910
0052s: -0.999953
0053s: -0.999929
0054s: -0.999897
0055s: -0.999948
0056s: -0.999904
0057s: -0.999918
0058s: -0.999888
0059s: -0.999917
0060s: -0.999890
0061s: -0.999884
0062s: -0.914750
0063s: -0.978687
0064s: -0.999861
0065s: -0.999860
0066s: -0.999946
0067s: -0.999931
0068s: -0.999907
0069s: -0.999930
0070s: -0.999937
0071s: -0.999956
0072s: -0.999919
0073s: -0.999900
0074s: -0.999938
0075s: -0.999945
0076s: -0.999911
0077s: -0.967304
0078s: -0.930287
0079s: -0.998592
0080s: -0.999911
0081s: -0.999947
0082s: -0.999920
0083s: -0.999926
0084s: -0.999950
0085s: -0.999915
0086s: -0.999920
0087s: -0.999344
0088s: -0.997739
0089s: -0.999908
0090s: -0.999817
0091s: -0.999926
0092s: -0.999888
0093s: -0.911693
0094s: -0.990610
0095s: -0.999864
0096s: -0.999935
0097s: -0.999957
0098s: -0.999912
0099s: -0.999922
0100s: -0.999925
0101s: -0.999925
0102s: -0.999947
0103s: -0.999958
0104s: -0.999934
0105s: -0.999931
0106s: -0.999962
0107s: -0.999918
0108s: -0.957586
0109s: -0.943082
0110s: -0.999713
0111s: -0.999949
0112s: -0.999947
0113s: -0.999966
0114s: -0.999917
0115s: -0.999936
0116s: -0.999949
0117s: -0.999952
0118s: -0.999905
0119s: -0.999968
0120s: -0.999963
0121s: -0.999927
0122s: -0.999925
0123s: -0.999883
0124s: -0.917334
0125s: -0.984122
0126s: -0.999914
0127s: -0.999926
0128s: -0.999964
0129s: -0.999929
0130s: -0.999970
0131s: -0.999905
0132s: -0.999928
0133s: -0.999940
0134s: -0.999952
0135s: -0.999950
0136s: -0.999950
0137s: -0.999921
0138s: -0.999869
0139s: -0.971376
0140s: -0.930913
0141s: -0.999094
0142s: -0.999934
0143s: -0.999933
0144s: -0.999946
0145s: -0.999934
0146s: -0.999951
0147s: -0.999911
0148s: -0.999931
0149s: -0.999962
0150s: -0.999936
0151s: -0.999957
0152s: -0.999916
0153s: -0.999914
0154s: -0.999888
0155s: -0.926778
0156s: -0.975632
0157s: -0.999938
0158s: -0.999926
0159s: -0.999949
0160s: -0.999940
0161s: -0.999974
0162s: -0.999934
0163s: -0.999960
0164s: -0.999953
0165s: -0.999921
0166s: -0.999943
0167s: -0.999973
0168s: -0.999944
0169s: -0.999957
0170s: -0.980948
0171s: -0.923250
0172s: -0.998113
0173s: -0.999945
0174s: -0.999941
0175s: -0.999952
0176s: -0.999917
0177s: -0.999970
0178s: -0.999945
0179s: -0.999922
0180s: -0.999937
0181s: -0.999955
0182s: -0.999953
0183s: -0.999951
0184s: -0.999886
0185s: -0.999953
        `;
        const infectedData = infectedRawData.trim().split('\n').map(line => {
            const [time, value] = line.split(': ');
            return { time, value: parseFloat(value) };
        });
        const infectedValues = infectedData.map(item => item.value);
        const infectedTimes = infectedData.map(item => item.time);
        const infectedAvg = infectedValues.reduce((a, b) => a + b, 0) / infectedValues.length;
        const infectedMin = Math.min(...infectedValues);
        const infectedMax = Math.max(...infectedValues);
        document.getElementById('infectedAvg').textContent = infectedAvg.toFixed(6);
        document.getElementById('infectedMin').textContent = infectedMin.toFixed(6);
        document.getElementById('infectedMax').textContent = infectedMax.toFixed(6);

        // Chart 1: Not Infected
        const notInfectedCtx = document.getElementById('notInfectedChart').getContext('2d');
        new Chart(notInfectedCtx, {
            type: 'line',
            data: {
                labels: notInfectedTimes,
                datasets: [{
                    label: 'Vibration',
                    data: notInfectedValues,
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 2,
                    fill: false
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: false,
                        title: {
                            display: true,
                            text: 'Vibration Value'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Time (s)'
                        }
                    }
                }
            }
        });

        // Chart 2: Infected
        const infectedCtx = document.getElementById('infectedChart').getContext('2d');
        new Chart(infectedCtx, {
            type: 'line',
            data: {
                labels: infectedTimes,
                datasets: [{
                    label: 'Vibration',
                    data: infectedValues,
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 2,
                    fill: false
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: false,
                        title: {
                            display: true,
                            text: 'Vibration Value'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Time (s)'
                        }
                    }
                }
            }
        });

        // Chart 3: Comparison
        const comparisonCtx = document.getElementById('comparisonChart').getContext('2d');
        new Chart(comparisonCtx, {
            type: 'line',
            data: {
                labels: [...new Set([...notInfectedTimes, ...infectedTimes])].sort(), // Combine and sort times
                datasets: [
                    {
                        label: 'Not Infected',
                        data: notInfectedData.reduce((acc, curr) => {
                            acc[curr.time] = curr.value;
                            return acc;
                        }, {}),
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.1
                    },
                    {
                        label: 'Infected',
                        data: infectedData.reduce((acc, curr) => {
                            acc[curr.time] = curr.value;
                            return acc;
                        }, {}),
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.1
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: false,
                        title: {
                            display: true,
                            text: 'Vibration Value'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Time (s)'
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        mode: 'index',
                        intersect: false
                    }
                }
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>